---
title: "数据成员，函数成员"
date: 2018-03-08 16:16:01
tags: 
---

# 数据成员，函数成员

<!--more-->
参考书籍: 《C#高级编程》

## 数据成员

类中可以定义数据成员。默认的情况下，该成员为实例成员，除非使用`static`显式声明。

## 函数成员

### 方法
在C#术语中，函数成员除方法外仍包括类或结构中的一些非数据成员，如索引器，运算符，构造函数和析构函数等，甚至还有属性。所以方法与函数应严格区分。因定义与调用等与CPP相同，所以不再赘述。
#### ref参数
正常情况下，C#中值类型传递的参数为值传递，若是想要使用应用传递，则需在函数定义时的变量前加上`ref`关键字，并且在调用时也许加上，例子如下：
```CS
//定义
static void Inc(ref int x)
{
	x += 1;
    return;
}
----------
//调用
int a = 10;
Inc(ref a);
```
#### out参数
因为在C#中，所有的参数在使用前必须初始化，而当我们想要在函数中传递出一个值时，我们若是使用`ref`来修饰则需要在调用函数前加入一段不必要的初始化，比如：
```
static void Sum(int a,int b,ref int ans)
{
	ans = a + b;
    return;
}
```
当我们调用上面的函数时，因为调用了`ans`参数，所以编译器会要求初始化，但是这段初始化并无意义。所以，C#中加入了`out`修饰符，使得传入的参数可以不初始化，并且始用引用传递。定义与调用方法与`ref`相同。

#### 命名参数

参数需要按照定义的顺序传递给方法。但是也可以使用以下方式：
```CS
static void Minus(int a, int b, out int ans)
{
	ans = a - b;
    return;
}

int x = 10, y = 2;

//以下两个写法等价
Minus(x,y);
Minus(b: y, a: x);
```
### 属性

**属性(property)**的概念是：它是一个方法或一对方法，在客户端代码看来，它(们)是一个字段。

在属性中包含了`get`和`set`访问器。它们都不能包含任何参数。并且`get`必须返回一个类型与属性相同的值，`set`中包含一个名为`value`类型与属性相同的变量。例如下面这个例子包含一个属性`Age`，它设置了一个字段`age`。在这个例子中,`age`是`Age`的后备变量：
```CS
private int age;

public int Age
{
	get
    {
    	return age;
    }
    set
    {
    	age = value;
    }
}
```

#### 只读或只写
只需只写入`set`或`get`函数即可。
#### 属性的访问修饰符
C#允许给属性的`get`和`set`访问其设置不同的访问修饰符，但是必须有一个具备属性的访问级别。
#### 自动实现的属性
如果属性的`set`和`get`访问器中没有任何逻辑，就可以使用自动实现的属性。如之前的代码如下：
```CS
public int Age {get; set; }
```
此时也不需要声明`age`，编译器会自动创建`private`修饰的`age`变量。另外，以下写法亦合法：
```CS
public int Age {get; private ste;}
```
## 构造函数
声明构造函数就是声明一个和类同名的方法类型。
```CS
public class MyClass
{
	public MyClass
    {
    	//Code here
	}
}
```
在构建类时，系统会自动生成一个无参构造函数。构造函数像普通函数一样支持函数重构，但是自己构建完构造函数之后编译器便不会自动生成无参的构造函数了。